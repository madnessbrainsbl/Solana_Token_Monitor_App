<Window x:Class="TokenMonitorApp.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings" Height="680" Width="720"
        Background="#222">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Text="Настройки" Foreground="White" FontSize="18" FontWeight="Bold"/>

            <GroupBox Grid.Row="1" Header="Moralis API Key" Margin="0,10,0,0" Foreground="White">
                <StackPanel Margin="8">
                    <TextBlock Text="Ключ хранится шифрованно в профиле Windows (DPAPI)." Foreground="#ccc" Margin="0,0,0,8"/>
                    <PasswordBox x:Name="MoralisKeyBox"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
                        <Button Content="Сохранить ключ" Width="140" Margin="0,0,8,0" Click="SaveMoralisKey_Click"/>
                        <Button Content="Удалить ключ" Width="120" Click="ClearMoralisKey_Click"/>
                    </StackPanel>
                    <TextBlock x:Name="MoralisStatus" Foreground="#9acd32" Margin="0,6,0,0"/>
                </StackPanel>
            </GroupBox>

            <!-- Filters -->
            <GroupBox Grid.Row="2" Header="Фильтр 1 — MinCap" Margin="0,10,0,0" Foreground="White">
                <StackPanel Margin="8">
                    <CheckBox x:Name="MinCapEnabled" Content="Включить фильтр" Foreground="White"/>
                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                        <TextBlock Text="Количество последних токенов (1-3):" Foreground="#ddd" VerticalAlignment="Center"/>
                        <ComboBox x:Name="MinCapN" Width="80" Margin="8,0,0,0">
                            <ComboBoxItem>1</ComboBoxItem>
                            <ComboBoxItem>2</ComboBoxItem>
                            <ComboBoxItem>3</ComboBoxItem>
                        </ComboBox>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                        <TextBlock Text="Минимальная капитализация, $:" Foreground="#ddd" VerticalAlignment="Center"/>
                        <TextBox x:Name="MinCapValue" Width="120" Margin="8,0,0,0"/>
                    </StackPanel>
                    <CheckBox x:Name="MinCapAutoOpen" Content="Автооткрытие Axiom" Foreground="White" Margin="0,6,0,0"/>
                </StackPanel>
            </GroupBox>

            <GroupBox Grid.Row="3" Header="Фильтр 2 — AVG Cap" Margin="0,10,0,0" Foreground="White">
                <StackPanel Margin="8">
                    <CheckBox x:Name="AvgCapEnabled" Content="Включить фильтр" Foreground="White"/>
                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                        <TextBlock Text="Количество последних токенов (1-3):" Foreground="#ddd" VerticalAlignment="Center"/>
                        <ComboBox x:Name="AvgCapN" Width="80" Margin="8,0,0,0">
                            <ComboBoxItem>1</ComboBoxItem>
                            <ComboBoxItem>2</ComboBoxItem>
                            <ComboBoxItem>3</ComboBoxItem>
                        </ComboBox>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                        <TextBlock Text="Min средняя капитализация, $:" Foreground="#ddd" VerticalAlignment="Center"/>
                        <TextBox x:Name="AvgCapValue" Width="120" Margin="8,0,0,0"/>
                    </StackPanel>
                    <CheckBox x:Name="AvgCapAutoOpen" Content="Автооткрытие Axiom" Foreground="White" Margin="0,6,0,0"/>
                </StackPanel>
            </GroupBox>

            <GroupBox Grid.Row="4" Header="Фильтр 3 — Dev" Margin="0,10,0,0" Foreground="White">
                <StackPanel Margin="8">
                    <CheckBox x:Name="DevEnabled" Content="Включить фильтр" Foreground="White"/>
                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                        <Button x:Name="AddDevBtn" Content="Добавить адрес" Width="140" Click="AddDev_Click"/>
                        <Button x:Name="RemoveDevBtn" Content="Удалить выбранный" Width="160" Margin="8,0,0,0" Click="RemoveDev_Click"/>
                    </StackPanel>
                    <ListBox x:Name="DevList" Height="100" Margin="0,6,0,0"/>
                    <CheckBox x:Name="DevAutoOpen" Content="Автооткрытие Axiom" Foreground="White" Margin="0,6,0,0"/>
                </StackPanel>
            </GroupBox>

            <GroupBox Grid.Row="5" Header="Фильтр 4 — Dev Migration" Margin="0,10,0,0" Foreground="White">
                <StackPanel Margin="8">
                    <CheckBox x:Name="MigEnabled" Content="Включить фильтр" Foreground="White"/>
                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                        <TextBlock Text="Количество последних токенов (1-10):" Foreground="#ddd" VerticalAlignment="Center"/>
                        <ComboBox x:Name="MigN" Width="80" Margin="8,0,0,0">
                            <ComboBoxItem>1</ComboBoxItem>
                            <ComboBoxItem>2</ComboBoxItem>
                            <ComboBoxItem>3</ComboBoxItem>
                            <ComboBoxItem>4</ComboBoxItem>
                            <ComboBoxItem>5</ComboBoxItem>
                            <ComboBoxItem>6</ComboBoxItem>
                            <ComboBoxItem>7</ComboBoxItem>
                            <ComboBoxItem>8</ComboBoxItem>
                            <ComboBoxItem>9</ComboBoxItem>
                            <ComboBoxItem>10</ComboBoxItem>
                        </ComboBox>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                        <TextBlock Text="Процент миграций (0-100):" Foreground="#ddd" VerticalAlignment="Center"/>
                        <TextBox x:Name="MigPercent" Width="80" Margin="8,0,0,0"/>
                    </StackPanel>
                    <CheckBox x:Name="MigAutoOpen" Content="Автооткрытие Axiom" Foreground="White" Margin="0,6,0,0"/>
                </StackPanel>
            </GroupBox>

            <GroupBox Grid.Row="6" Header="Фильтр 5 — Last" Margin="0,10,0,0" Foreground="White">
                <StackPanel Margin="8">
                    <CheckBox x:Name="LastEnabled" Content="Включить фильтр" Foreground="White"/>
                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                        <TextBlock Text="От капитализации (ATH последней миграции), $:" Foreground="#ddd" VerticalAlignment="Center"/>
                        <TextBox x:Name="LastMinAthValue" Width="120" Margin="8,0,0,0"/>
                    </StackPanel>
                    <CheckBox x:Name="LastAutoOpen" Content="Автооткрытие Axiom" Foreground="White"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                        <Button Content="Сохранить фильтры" Width="160" Click="SaveFilters_Click"/>
                        <Button Content="Закрыть" Width="120" IsCancel="True" Margin="8,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>
        </Grid>
    </ScrollViewer>
</Window>
